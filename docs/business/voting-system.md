# 龙舟投票系统说明

## 系统概述

龙舟投票系统是一个基于 Vue 3 的前端投票应用，支持用户对龙舟队伍进行投票和查看排行榜。

## 核心功能

### 1. 投票功能
- **每日投票限制**: 每天最多可投票 3 个作品
- **投票状态**: 支持投票和取消投票
- **实时更新**: 投票后立即更新票数和排名

### 2. 排行榜
- **实时排名**: 根据票数实时计算排名
- **前三名展示**: 特殊展示前三名队伍
- **完整排行**: 显示所有队伍的排名情况

### 3. 详情页面
- **队伍信息**: 显示队伍名称、作者、描述
- **统计数据**: 浏览量、票数、排名
- **投票操作**: 支持在详情页直接投票

### 4. 搜索功能
- **关键词搜索**: 支持按队伍名称和作者搜索
- **实时过滤**: 输入时实时过滤结果

## 数据结构

### 队伍数据 (TeamCard)
```typescript
interface TeamCard {
  id: number           // 队伍ID
  title: string        // 队伍名称
  author: string       // 作者
  votes: number        // 当前票数
  originalVotes: number // 原始票数
  voted: boolean       // 是否已投票
  readCount: number    // 浏览量
  description: string  // 队伍描述
  img?: string        // 队伍图片
}
```

## 业务规则

### 投票规则
1. **每日限制**: 每天最多投票 3 个作品
2. **状态重置**: 每天 0 点重置投票状态
3. **票数累计**: 投票会增加队伍的总票数
4. **取消投票**: 可以取消已投的票

### 排名规则
1. **按票数排序**: 票数高的排名靠前
2. **实时计算**: 投票后立即重新计算排名
3. **相同票数**: 按队伍ID排序

### 数据持久化
1. **本地存储**: 使用 localStorage 保存数据
2. **状态同步**: 多页面间数据实时同步
3. **数据迁移**: 支持旧数据结构自动迁移

## 页面结构

```
投票系统
├── 首页 (HomePage)
├── 规则页 (RulePage)
├── 投票页 (VotePage)
│   ├── 搜索功能
│   ├── 队伍卡片列表
│   └── 提交栏
├── 排行榜 (RankPage)
│   ├── 前三名展示
│   └── 完整排行榜
└── 详情页 (DetailPage)
    ├── 队伍信息
    ├── 统计数据
    └── 操作按钮
```

## 状态管理

使用 Pinia 进行状态管理，主要包括：

- `teamCards`: 队伍数据数组
- `selectedCardsCount`: 已投票数量
- `selectedCards`: 已投票的队伍
- `rankedCards`: 按排名排序的队伍

## 技术特性

1. **响应式设计**: 支持移动端和桌面端
2. **实时更新**: 数据变化立即反映到界面
3. **离线存储**: 数据保存在本地，刷新不丢失
4. **类型安全**: 使用 TypeScript 确保类型安全